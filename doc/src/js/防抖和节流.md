# 防抖和节流

## 防抖(debounce)
防抖是指在事件被触发n秒后再执行回调，如果在这n秒内事件又被触发，则重新计时。

### 应用场景
- 搜索框输入查询
- 表单验证
- 按钮提交事件
- 浏览器窗口缩放，resize事件

### 实现方式
```js
function debounce(fn, delay) {
  let timer = null
  return function(...args) {
    if (timer) clearTimeout(timer)
    timer = setTimeout(() => {
      fn.apply(this, args)
    }, delay)
  }
}
```

## 节流(throttle)
节流是指在一定时间内，只能触发一次函数。如果在这个时间内多次触发函数，只有一次生效。

### 应用场景
- 滚动事件监听
- 搜索联想
- 高频点击
- 表单重复提交

### 实现方式
1. 时间戳方式：
```js
function throttle(fn, delay) {
  let prev = 0
  return function(...args) {
    let now = Date.now()
    if (now - prev >= delay) {
      fn.apply(this, args)
      prev = now
    }
  }
}
```
2. 定时器方式：
```js
function throttle(fn, delay) {
  let timer = null
  return function(...args) {
    if (!timer) {
      timer = setTimeout(() => {
        fn.apply(this, args)
        timer = null
      }, delay)
    }
  }
}
```
两种方式各有特点：时间戳方式会在第一次立即执行，定时器方式会在延迟后执行。




